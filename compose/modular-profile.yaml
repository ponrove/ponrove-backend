include:
  - openfeature-service.yaml

services:
  backend-ingestion:
    build:
      context: ../
      dockerfile: ./build/docker/Dockerfile.ingestion
    extends:
      file: extend-backend-env.yaml
      service: backend-environment
    ports:
      - 8080:8080
    depends_on:
      - openfeature-server
    links:
      - openfeature-server
    profiles:
      - modular
  backend-organisations:
    build:
      context: ../
      dockerfile: ./build/docker/Dockerfile.organisations
    extends:
      file: extend-backend-env.yaml
      service: backend-environment
    ports:
      - 8081:8080
    depends_on:
      - openfeature-server
    links:
      - openfeature-server
    profiles:
      - modular
  backend-users:
    build:
      context: ../
      dockerfile: ./build/docker/Dockerfile.users
    extends:
      file: extend-backend-env.yaml
      service: backend-environment
    ports:
      - 8082:8080
    depends_on:
      - openfeature-server
    links:
      - openfeature-server
    profiles:
      - modular
